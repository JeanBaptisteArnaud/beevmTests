/*
 * GCSpace.h
 *
 *  Created on: 18 déc. 2015
 *      Author: Arnaud Jean-Baptiste
 */

#ifndef GCSPACE_H_
#define GCSPACE_H_
#include "GCSpaceInfo.h"
#include "VMMemory.h"

namespace Bee {
class GCSpace {
protected:
	GCSpaceInfo *info;
	ulong base;
	ulong nextFree;
	ulong commitedLimit;
	ulong reservedLimit;
	ulong softLimit;
public:
	// accessor
	unsigned long getBase();
	unsigned long getNextFree();
	unsigned long getCommitedLimit();
	unsigned long getReservedLimit();
	unsigned long getSoftLimit();


	GCSpace();
	void load(void);
	bool includes(unsigned long * pointer);
	void loadFrom(GCSpace from);
	void reset();
	ulong * allocate(ulong size);
	void setInfo(GCSpaceInfo * pointer);
	unsigned long* shallowCopy(unsigned long *pointer);
	unsigned long getBase();
	unsigned long * shallowCopyGrowing(unsigned long * array , unsigned long grow);
	static GCSpace currentFrom();
	static GCSpace currentTo();
	static GCSpace old();
	static GCSpace dynamicNew(unsigned long size);
};

}

#endif /* GCSPACE_H_ */
